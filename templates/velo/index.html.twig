{% extends 'layouts/ecommerce.html.twig' %}

{% block title %}Nos Vélos - SamKhaser
{% endblock %}

{% block body %}
	<div class="container-fluid">
		<div class="d-flex justify-content-between align-items-center mb-4">
			<div>
				<h2 class="mb-1">Catalogue des vélos</h2>
				<p class="text-muted mb-0">Découvrez notre sélection de vélos pour tous les styles</p>
			</div>

			<div class="d-flex gap-2">
				{% include 'components/atoms/button.html.twig' with {
                content: 'Filtrer',
                type: 'outline',
                size: 'sm'
            } %}

				{% include 'components/atoms/button.html.twig' with {
                content: 'Trier',
                type: 'outline', 
                size: 'sm'
            } %}
			</div>
		</div>

		<!-- Quick stats -->
		<div class="row mb-4">
			<div class="col-md-3">
				<div class="card text-center">
					<div class="card-body">
						<h5 class="card-title">{{ velos|length }}</h5>
						<p class="card-text text-muted">Vélos disponibles</p>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card text-center">
					<div class="card-body">
						<h5 class="card-title">{{ velos|filter(v => v.estEnPromotion)|length }}</h5>
						<p class="card-text text-muted">En promotion</p>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card text-center">
					<div class="card-body">
						<h5 class="card-title">{{ velos|reduce((carry, velo) => carry + velo.stock, 0) }}</h5>
						<p class="card-text text-muted">Stock total</p>
					</div>
				</div>
			</div>
			<div class="col-md-3">
				<div class="card text-center">
					<div class="card-body">
						<h5 class="card-title">
							{% set types = [] %}
							{% for velo in velos %}
								{% if velo.type not in types %}
									{% set types = types|merge([velo.type]) %}
								{% endif %}
							{% endfor %}
							{{ types|length }}
						</h5>
						<p class="card-text text-muted">Catégories</p>
					</div>
				</div>
			</div>
		</div>

		<!-- Product Grid -->
		{% include 'components/organisms/product-grid.html.twig' with {
        products: velos,
        columns: 3
    } %}
	</div>
{% endblock %}
